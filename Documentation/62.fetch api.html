<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch api</title>
</head>

<body>

  <button onclick="getData('data.json')">Get data</button>

  <div>
    <p id="name"></p>
    <p id="family"></p>
    <p id="age"></p>
  </div>

  <script>
    // fetch api
    // روشی جدید برای کار با درخواست های http هست
    // برای این کار از سه تابع زیر استفاده میشه


    // fetch(url,)
    // از این تابع برای گرفتن اطلاعات استفاده میشه
    // این تابع اطلاعات رو به صورت یک promise بر میگردونه
    // پارامتر اول آدرس فایل هست



    // then(response)
    // برای مدیریت پاسخ دریافتی از این تابع استفاده میشه
    // تابعی رو به صورت پارامتر دریافت میکنه و روی پاسخ دریافتی، عملیاتی رو انجام میده
    // محدودیتی در تعداد استفاده نداره ولی هرچه کمتر، بهتر



    // catch(error)
    // برای مدیریت خطا های احتمالی موقع کار با درخواست ها استفاده میشه
    // تابعی رو به صورت پارامتر دریافت میکنه و مدیریت خطا رو انجام میده

    function getData(url) {
      fetch(url)
        .then(res => res.json())
        .then(data => {
          console.log((data))
          document.getElementById('name').innerHTML = data.person.name
          document.getElementById('family').innerHTML = data.person.family
          document.getElementById('age').innerHTML = data.person.age
        })
        .catch(error => {
          document.getElementById('demo').innerHTML = error
        })
    }

  </script>
</body>

</html>